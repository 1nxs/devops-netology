# Домашнее задание к занятию "5.1. Основы виртуализации"

## Задача 1

Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

### Ответ:
- полная (аппаратной) виртуализация - гипервизоры устанавливаются на "голое" железо и являются основной операционной системой, полностью используют апаратные ресурсы хоста.\
При полной виртуализации ВМ изолированы друг от друга и используют собственные ядра ОС. Пользователь может устанавливать собственные патчи на ядро.
- паравиртуализации - для работы гипервизора требуется ОС, именно она определяет доступ к ресурсам хоста.\
Паравиртуализация модифицирует ядро гостевой ВМ для разделения доступа к аппаратным ресурсам.
- виртуализации на основе ОС - выбор гипервизора зависит от типа ядра ОС, разделение ресурсов осуществляется на уровне ОС.

## Задача 2

Выберите тип один из вариантов использования организации физических серверов, 
в зависимости от условий использования.

Организация серверов:
- физические сервера
- паравиртуализация
- виртуализация уровня ОС

Условия использования:

- Высоконагруженная база данных, чувствительная к отказу
- Различные Java-приложения
- Windows системы для использования Бухгалтерским отделом 
- Системы, выполняющие высокопроизводительные расчеты на GPU

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

### Ответ:
* Высоконагруженная база данных, чувствительная к отказу - физические сервера\
  * Любой вид виртуализации даёт оверхед на машинные операции и латенси. Отказоустойчивость бд проще обеспечить логом транзакции и репликацией, бэкапом наконец.
* Различные Java-приложения - виртуализация уровня ОС
  * виртуализация уровня ОС, т.к. потребность в ресурсах меньше, скорость масштабирования выше и нет жестких требований к аппаратнымм ресурсам, требует меньше ресурсов на администрирование
* Windows системы для использования Бухгалтерским отделом - паравиртуализация
  * Гибкие возможности работы с виртуалкой, эффективные варианты снапшотов и бэкапа. Ну и мы про клиентский Windows вроде как говорим, тут возможна только паравиртуализация.
* Системы, выполняющие высокопроизводительные расчеты на GPU - физические сервера и виртуализация уровня ОС
  * Виртуализация GPU может потребоваться в проектах с машинным обучением, из предложенных видов виртуализации для GPU возможна только виртуализация средствами ОС
  * Физика подойдет для максимально производительного доступа к монопольному доступу GPU


## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.


### Ответ:
- 1\
В зависимости от кол-ва денег. Подойдет Hyper-V и vSphere. Имеют все перечисленные опции в "из коробки" (балансировка, репликация, бекапы).\
Второй вариацией на тему IaaS от Амазона, Сбера, Yandex etc. Тоже есть балансировщики, бэкапы.. Снимается ряд проблем обслуживания самих гипервизоров, порог входа для сапорта ниже выходит.
- 2\
Proxmox KVM - хорошо поддерживает Windows гостей, есть адекватное управление виртуалками, почти как у взрослых. Приличных размеров community.\
Xen - олдскульно, стабильно... тихо. Без денег можно конечно, но мало (Xen free)
- 3\
По существу вопроса - Для начала **Hyper-V**, для продолжения тоже.\
П.С. Неправильное утверждение о бесплатности - он бесплатен для тебя как для конечника, ты платишь за лицензии Windows Server - там где он роль.
- 4
Решения виртуализации уровне ОС, контейнеризация - будут оптимальны. Из популярных Dokcer, Rocket

## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.
### Ответ:

- Проблемы:
  - Требуется более квалифицированный, следовательно - дорогой персонал для поддержки
  - Разнородные системы управления дадут накладные операционые расходы
  - Усложнится обслуживание ВМ в случаях необходимости миграции между системами 
  - Мониторить этот зоопарк будет более проблемно, тк разные вендоры очень "творчески" подходят к одним и тем же критериям.
- Зачем?
  - Ну вот был у конторы один датацентр, а потом поменялся CTO и стал второй, лучше, молодёжней...
    - и вот теперь больше инженеров строит из них максимально совместимый Disaster cluster...
    - Понятно, что скорее всего это была диверсификация активов... ну и допустим это куплен IaaS.. и даже вендор гипервизора сходится, но всё равно проблем будет даже на уровне доступа к ресурсам. У vmWare будет tenant с vCloud, а дома свой vCenter, как пример
    - ну и теперь это надо скрестить...
  - Потому что могу :-)
- Если бы был выбор и $$$$:
  - То был бы отличный проект гомогенной среды.
  - В базу встал бы слой решений от vmWare, со стороны вируализации
  - Производительные allflash файлеры с поддержкой вендора на x+ лет
  - моновендорные решения по сетевому обеспечению и хост-серверам с гарантией NBD

  Плюсов масса: 
Наличие вендорских курсов для подготовки персонала. Прозрачность решения даже для пришедших со стороны людей. Эффективность на аппаратном уровне. Возможность как горизонтального так и вертикального расширения.
